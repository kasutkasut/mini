{"version":3,"file":"Chat-DsWGOr5L.js","sources":["../../node_modules/@mui/material/AppBar/appBarClasses.js","../../node_modules/@mui/material/AppBar/AppBar.js","../../node_modules/@mui/material/Toolbar/toolbarClasses.js","../../node_modules/@mui/material/Toolbar/Toolbar.js","../../node_modules/@mui/icons-material/esm/Favorite.js","../../node_modules/@mui/icons-material/esm/FavoriteBorder.js","../../node_modules/@mui/icons-material/esm/Message.js","../../node_modules/@mui/icons-material/esm/Send.js","../../node_modules/@mui/icons-material/esm/Star.js","../../node_modules/@mui/icons-material/esm/StarBorder.js","../../src/components/CharacterIntro.jsx","../../src/pages/Chat.jsx"],"sourcesContent":["import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getAppBarUtilityClass(slot) {\n  return generateUtilityClass('MuiAppBar', slot);\n}\nconst appBarClasses = generateUtilityClasses('MuiAppBar', ['root', 'positionFixed', 'positionAbsolute', 'positionSticky', 'positionStatic', 'positionRelative', 'colorDefault', 'colorPrimary', 'colorSecondary', 'colorInherit', 'colorTransparent', 'colorError', 'colorInfo', 'colorSuccess', 'colorWarning']);\nexport default appBarClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\", \"color\", \"enableColorOnDark\", \"position\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport styled from '../styles/styled';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport capitalize from '../utils/capitalize';\nimport Paper from '../Paper';\nimport { getAppBarUtilityClass } from './appBarClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    color,\n    position,\n    classes\n  } = ownerState;\n  const slots = {\n    root: ['root', `color${capitalize(color)}`, `position${capitalize(position)}`]\n  };\n  return composeClasses(slots, getAppBarUtilityClass, classes);\n};\n\n// var2 is the fallback.\n// Ex. var1: 'var(--a)', var2: 'var(--b)'; return: 'var(--a, var(--b))'\nconst joinVars = (var1, var2) => var1 ? `${var1 == null ? void 0 : var1.replace(')', '')}, ${var2})` : var2;\nconst AppBarRoot = styled(Paper, {\n  name: 'MuiAppBar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, styles[`position${capitalize(ownerState.position)}`], styles[`color${capitalize(ownerState.color)}`]];\n  }\n})(({\n  theme,\n  ownerState\n}) => {\n  const backgroundColorDefault = theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[900];\n  return _extends({\n    display: 'flex',\n    flexDirection: 'column',\n    width: '100%',\n    boxSizing: 'border-box',\n    // Prevent padding issue with the Modal and fixed positioned AppBar.\n    flexShrink: 0\n  }, ownerState.position === 'fixed' && {\n    position: 'fixed',\n    zIndex: (theme.vars || theme).zIndex.appBar,\n    top: 0,\n    left: 'auto',\n    right: 0,\n    '@media print': {\n      // Prevent the app bar to be visible on each printed page.\n      position: 'absolute'\n    }\n  }, ownerState.position === 'absolute' && {\n    position: 'absolute',\n    zIndex: (theme.vars || theme).zIndex.appBar,\n    top: 0,\n    left: 'auto',\n    right: 0\n  }, ownerState.position === 'sticky' && {\n    // ⚠️ sticky is not supported by IE11.\n    position: 'sticky',\n    zIndex: (theme.vars || theme).zIndex.appBar,\n    top: 0,\n    left: 'auto',\n    right: 0\n  }, ownerState.position === 'static' && {\n    position: 'static'\n  }, ownerState.position === 'relative' && {\n    position: 'relative'\n  }, !theme.vars && _extends({}, ownerState.color === 'default' && {\n    backgroundColor: backgroundColorDefault,\n    color: theme.palette.getContrastText(backgroundColorDefault)\n  }, ownerState.color && ownerState.color !== 'default' && ownerState.color !== 'inherit' && ownerState.color !== 'transparent' && {\n    backgroundColor: theme.palette[ownerState.color].main,\n    color: theme.palette[ownerState.color].contrastText\n  }, ownerState.color === 'inherit' && {\n    color: 'inherit'\n  }, theme.palette.mode === 'dark' && !ownerState.enableColorOnDark && {\n    backgroundColor: null,\n    color: null\n  }, ownerState.color === 'transparent' && _extends({\n    backgroundColor: 'transparent',\n    color: 'inherit'\n  }, theme.palette.mode === 'dark' && {\n    backgroundImage: 'none'\n  })), theme.vars && _extends({}, ownerState.color === 'default' && {\n    '--AppBar-background': ownerState.enableColorOnDark ? theme.vars.palette.AppBar.defaultBg : joinVars(theme.vars.palette.AppBar.darkBg, theme.vars.palette.AppBar.defaultBg),\n    '--AppBar-color': ownerState.enableColorOnDark ? theme.vars.palette.text.primary : joinVars(theme.vars.palette.AppBar.darkColor, theme.vars.palette.text.primary)\n  }, ownerState.color && !ownerState.color.match(/^(default|inherit|transparent)$/) && {\n    '--AppBar-background': ownerState.enableColorOnDark ? theme.vars.palette[ownerState.color].main : joinVars(theme.vars.palette.AppBar.darkBg, theme.vars.palette[ownerState.color].main),\n    '--AppBar-color': ownerState.enableColorOnDark ? theme.vars.palette[ownerState.color].contrastText : joinVars(theme.vars.palette.AppBar.darkColor, theme.vars.palette[ownerState.color].contrastText)\n  }, !['inherit', 'transparent'].includes(ownerState.color) && {\n    backgroundColor: 'var(--AppBar-background)'\n  }, {\n    color: ownerState.color === 'inherit' ? 'inherit' : 'var(--AppBar-color)'\n  }, ownerState.color === 'transparent' && {\n    backgroundImage: 'none',\n    backgroundColor: 'transparent',\n    color: 'inherit'\n  }));\n});\nconst AppBar = /*#__PURE__*/React.forwardRef(function AppBar(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiAppBar'\n  });\n  const {\n      className,\n      color = 'primary',\n      enableColorOnDark = false,\n      position = 'fixed'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    color,\n    position,\n    enableColorOnDark\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(AppBarRoot, _extends({\n    square: true,\n    component: \"header\",\n    ownerState: ownerState,\n    elevation: 4,\n    className: clsx(classes.root, className, position === 'fixed' && 'mui-fixed'),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? AppBar.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['default', 'inherit', 'primary', 'secondary', 'transparent', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * If true, the `color` prop is applied in dark mode.\n   * @default false\n   */\n  enableColorOnDark: PropTypes.bool,\n  /**\n   * The positioning type. The behavior of the different options is described\n   * [in the MDN web docs](https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning).\n   * Note: `sticky` is not universally supported and will fall back to `static` when unavailable.\n   * @default 'fixed'\n   */\n  position: PropTypes.oneOf(['absolute', 'fixed', 'relative', 'static', 'sticky']),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default AppBar;","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getToolbarUtilityClass(slot) {\n  return generateUtilityClass('MuiToolbar', slot);\n}\nconst toolbarClasses = generateUtilityClasses('MuiToolbar', ['root', 'gutters', 'regular', 'dense']);\nexport default toolbarClasses;","'use client';\n\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nconst _excluded = [\"className\", \"component\", \"disableGutters\", \"variant\"];\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { useDefaultProps } from '../DefaultPropsProvider';\nimport styled from '../styles/styled';\nimport { getToolbarUtilityClass } from './toolbarClasses';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    disableGutters,\n    variant\n  } = ownerState;\n  const slots = {\n    root: ['root', !disableGutters && 'gutters', variant]\n  };\n  return composeClasses(slots, getToolbarUtilityClass, classes);\n};\nconst ToolbarRoot = styled('div', {\n  name: 'MuiToolbar',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, !ownerState.disableGutters && styles.gutters, styles[ownerState.variant]];\n  }\n})(({\n  theme,\n  ownerState\n}) => _extends({\n  position: 'relative',\n  display: 'flex',\n  alignItems: 'center'\n}, !ownerState.disableGutters && {\n  paddingLeft: theme.spacing(2),\n  paddingRight: theme.spacing(2),\n  [theme.breakpoints.up('sm')]: {\n    paddingLeft: theme.spacing(3),\n    paddingRight: theme.spacing(3)\n  }\n}, ownerState.variant === 'dense' && {\n  minHeight: 48\n}), ({\n  theme,\n  ownerState\n}) => ownerState.variant === 'regular' && theme.mixins.toolbar);\nconst Toolbar = /*#__PURE__*/React.forwardRef(function Toolbar(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiToolbar'\n  });\n  const {\n      className,\n      component = 'div',\n      disableGutters = false,\n      variant = 'regular'\n    } = props,\n    other = _objectWithoutPropertiesLoose(props, _excluded);\n  const ownerState = _extends({}, props, {\n    component,\n    disableGutters,\n    variant\n  });\n  const classes = useUtilityClasses(ownerState);\n  return /*#__PURE__*/_jsx(ToolbarRoot, _extends({\n    as: component,\n    className: clsx(classes.root, className),\n    ref: ref,\n    ownerState: ownerState\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? Toolbar.propTypes /* remove-proptypes */ = {\n  // ┌────────────────────────────── Warning ──────────────────────────────┐\n  // │ These PropTypes are generated from the TypeScript type definitions. │\n  // │    To update them, edit the d.ts file and run `pnpm proptypes`.     │\n  // └─────────────────────────────────────────────────────────────────────┘\n  /**\n   * The Toolbar children, usually a mixture of `IconButton`, `Button` and `Typography`.\n   * The Toolbar is a flex container, allowing flex item properties to be used to lay out the children.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * If `true`, disables gutter padding.\n   * @default false\n   */\n  disableGutters: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The variant to use.\n   * @default 'regular'\n   */\n  variant: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['dense', 'regular']), PropTypes.string])\n} : void 0;\nexport default Toolbar;","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z\"\n}), 'Favorite');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05\"\n}), 'FavoriteBorder');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z\"\n}), 'Message');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z\"\n}), 'Send');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z\"\n}), 'Star');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z\"\n}), 'StarBorder');","import React from 'react';\r\nimport { \r\n  Box,\r\n  Button, \r\n  Typography, \r\n  IconButton,\r\n  Stack,\r\n  Chip\r\n} from '@mui/material';\r\nimport { \r\n  Message as MessageIcon,\r\n  ArrowBack as ArrowBackIcon,\r\n  Favorite as FavoriteIcon,\r\n  FavoriteBorder as FavoriteBorderIcon,\r\n  Star as StarIcon,\r\n  StarBorder as StarBorderIcon\r\n} from '@mui/icons-material';\r\nimport useUserStore from '../store/userStore';\r\n\r\nconst CharacterIntro = ({ character, onStartChat, onBack }) => {\r\n  const { characterStats, toggleLike, toggleFavorite } = useUserStore();\r\n  const stats = characterStats[character.id] || { likes: 0, favorites: 0, isLiked: false, isFavorited: false };\r\n  const user = useUserStore((state) => state.user);\r\n  const handleLike = async (event) => {\r\n    event.stopPropagation();\r\n    if (!user || !user.id) {\r\n      console.error('User not authenticated');\r\n      return;\r\n    }\r\n    \r\n    // 乐观更新UI\r\n    toggleLike(character.id);\r\n    \r\n    try {\r\n      const response = await fetch(`/api/characters/${character.id}/like`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          user_id: user.id,\r\n          isLiked: !stats.isLiked\r\n        })\r\n      });\r\n    \r\n      if (!response.ok) {\r\n        throw new Error('Failed to update like status');\r\n      }\r\n    \r\n      const data = await response.json();\r\n      if (data.success) {\r\n        // 更新本地状态中的点赞数\r\n        useUserStore.setState(state => ({\r\n          characterStats: {\r\n            ...state.characterStats,\r\n            [character.id]: {\r\n              ...state.characterStats[character.id],\r\n              likes: data.likes\r\n            }\r\n          }\r\n        }));\r\n      } else {\r\n        throw new Error('Failed to update like count');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating like status:', error);\r\n      // 如果API调用失败，回滚本地状态\r\n      toggleLike(character.id);\r\n    }\r\n  };\r\n  const handleCollect = (event) => {\r\n    event.stopPropagation();\r\n    toggleFavorite(character.id);\r\n  };\r\n  return (\r\n    <Box sx={{ \r\n      minHeight: '100vh',\r\n      bgcolor: '#1A1B1E',\r\n      color: 'white'\r\n    }}>\r\n      {/* Header */}\r\n      <Box sx={{ \r\n        display: 'flex', \r\n        alignItems: 'center', \r\n        p: 2,\r\n        borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\r\n      }}>\r\n        <Button\r\n          startIcon={<ArrowBackIcon />}\r\n          onClick={onBack}\r\n          sx={{ \r\n            color: 'rgba(255, 255, 255, 0.7)',\r\n            '&:hover': {\r\n              color: 'white',\r\n              bgcolor: 'rgba(255, 255, 255, 0.1)'\r\n            }\r\n          }}\r\n        >\r\n          Back\r\n        </Button>\r\n      </Box>\r\n\r\n      {/* Main Content */}\r\n      <Box sx={{ p: 0 }}>\r\n        {/* Character Image */}\r\n        <Box sx={{ \r\n          width: '100%',\r\n          height: '70vh',\r\n          position: 'relative'\r\n        }}>\r\n          <Box\r\n            component=\"img\"\r\n            src={character.avatar}\r\n            alt={character.name}\r\n            sx={{ \r\n              width: '100%',\r\n              height: '100%',\r\n              objectFit: 'cover'\r\n            }}\r\n          />\r\n        </Box>\r\n\r\n        {/* Character Info */}\r\n        <Box sx={{ p: 2 }}>\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            justifyContent: 'space-between', \r\n            alignItems: 'flex-start',\r\n            mb: 2\r\n          }}>\r\n            <Box>\r\n              <Typography variant=\"h6\" sx={{ fontWeight: 'bold', mb: 1 }}>\r\n                {character.name}\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ color: 'rgba(255, 255, 255, 0.7)' }}>\r\n                Author: {character.author}\r\n              </Typography>\r\n            </Box>\r\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: 3 }}>\r\n              <Box sx={{ \r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center'\r\n              }}>\r\n                <IconButton \r\n                  onClick={handleLike} \r\n                  sx={{ \r\n                    color: stats.isLiked ? '#ff4081' : 'rgba(255, 255, 255, 0.7)',\r\n                    p: 1\r\n                  }}\r\n                >\r\n                  {stats.isLiked ? <FavoriteIcon /> : <FavoriteBorderIcon />}\r\n                </IconButton>\r\n                <Typography \r\n                  variant=\"caption\" \r\n                  sx={{ \r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    minHeight: '16px'\r\n                  }}\r\n                >\r\n                  {stats.likes}\r\n                </Typography>\r\n              </Box>\r\n              <Box sx={{ \r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center'\r\n              }}>\r\n                <IconButton \r\n                  onClick={handleCollect} \r\n                  sx={{ \r\n                    color: stats.isFavorited ? '#ffd700' : 'rgba(255, 255, 255, 0.7)',\r\n                    p: 1\r\n                  }}\r\n                >\r\n                  {stats.isFavorited ? <StarIcon /> : <StarBorderIcon />}\r\n                </IconButton>\r\n                <Typography \r\n                  variant=\"caption\" \r\n                  sx={{ \r\n                    color: 'rgba(255, 255, 255, 0.7)',\r\n                    minHeight: '16px'\r\n                  }}\r\n                >\r\n                  {stats.favorites}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          </Box>\r\n\r\n          <Box sx={{ \r\n            display: 'flex', \r\n            flexWrap: 'wrap', \r\n            gap: 1, \r\n            mb: 2\r\n          }}>\r\n            {character.tags?.map((tag, index) => (\r\n              <Chip\r\n                key={index}\r\n                label={tag}\r\n                size=\"small\"\r\n                sx={{\r\n                  bgcolor: 'rgba(255, 255, 255, 0.1)',\r\n                  color: 'rgba(255, 255, 255, 0.9)',\r\n                  borderRadius: '4px',\r\n                  height: '24px',\r\n                  maxWidth: '150px',\r\n                  '& .MuiChip-label': {\r\n                    whiteSpace: 'nowrap',\r\n                    overflow: 'hidden',\r\n                    textOverflow: 'ellipsis'\r\n                  }\r\n                }}\r\n              />\r\n            ))}\r\n          </Box>\r\n\r\n          <Typography variant=\"body2\" sx={{ color: 'rgba(255, 255, 255, 0.9)', mb: 3 }}>\r\n            {character.description}\r\n          </Typography>\r\n\r\n          <Button\r\n            fullWidth\r\n            variant=\"contained\"\r\n            size=\"large\"\r\n            startIcon={<MessageIcon />}\r\n            onClick={onStartChat}\r\n            sx={{\r\n              bgcolor: '#7C3AED',\r\n              borderRadius: 2,\r\n              py: 1.5,\r\n              textTransform: 'none',\r\n              '&:hover': {\r\n                bgcolor: '#6D28D9'\r\n              }\r\n            }}\r\n          >\r\n            Start a private chat\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default CharacterIntro;","import React, { useState, useRef, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  Box, \n  Paper, \n  Typography, \n  TextField, \n  IconButton, \n  Avatar, \n  AppBar, \n  Toolbar,\n  Container,\n  Fade,\n  CircularProgress,\n  Chip\n} from '@mui/material';\nimport { \n  Send as SendIcon,\n  ArrowBack as ArrowBackIcon,\n  VolumeUp as VolumeUpIcon\n} from '@mui/icons-material';\nimport { CHARACTERS, generateInitialScenario as generateScenarioAPI } from '../data/characters';\nimport CharacterIntro from '../components/CharacterIntro';\nimport useUserStore from '../store/userStore';\n\nconst Chat = () => {\n  const navigate = useNavigate();\n  const { characterId } = useParams();\n  const [messages, setMessages] = useState([]);\n  const [inputValue, setInputValue] = useState('');\n  const [showIntro, setShowIntro] = useState(true);\n  const [isTyping, setIsTyping] = useState(false);\n  const [initialScenario, setInitialScenario] = useState('');\n  const [isPlayingAudio, setIsPlayingAudio] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n  const audioRef = useRef(null);\n  const { addChatMessage, getChatHistory } = useUserStore();\n\n  const character = CHARACTERS[characterId];\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    if (!character) {\n      navigate('/');\n      return;\n    }\n  }, [character, navigate]);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    // 加载历史聊天记录\n    const history = getChatHistory(characterId);\n    if (history.length > 0) {\n      setMessages(history);\n    }\n  }, [characterId]);\n\n  // 生成初始场景\n  const generateInitialScenario = async (character) => {\n    try {\n      const result = await generateScenarioAPI(character);\n      if (result) {\n        setInitialScenario(result.mainScenario);\n        return result;\n      }\n      return null;\n    } catch (error) {\n      console.error('Error generating scenario:', error);\n      return null;\n    }\n  };\n\n  // 生成AI回复和语音\n  const generateResponse = async (character, userInput, { previousMessages }) => {\n    const maxRetries = 3;\n    let retryCount = 0;\n    \n    while (retryCount < maxRetries) {\n      try {\n        // 调用 OpenAI API 生成回复\n        const openaiResponse = await fetch('https://api.openai.com/v1/chat/completions', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${import.meta.env.VITE_OPENAI_API_KEY}`\n          },\n          body: JSON.stringify({\n            model: \"gpt-3.5-turbo\",\n            messages: [\n              {\n                role: \"system\",\n                content: `You are ${character.name}. ${JSON.stringify(character.characterSettings)}`\n              },\n              ...previousMessages.map(message => ({\n                role: message.role,\n                content: message.text\n              })),\n              {\n                role: \"user\",\n                content: userInput\n              }\n            ],\n            temperature: 0.7,\n            max_tokens: 1000\n          })\n        });\n\n        if (!openaiResponse.ok) {\n          throw new Error(`OpenAI API error: ${openaiResponse.status}`);\n        }\n\n        const openaiData = await openaiResponse.json();\n        if (!openaiData.choices || !openaiData.choices[0]) {\n          throw new Error('Invalid response from OpenAI API');\n        }\n\n        const responseText = openaiData.choices[0].message.content;\n\n        // 调用 ElevenLabs API 生成语音\n        try {\n          const voiceResponse = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${import.meta.env.VITE_ELEVENLABS_VOICE_ID}`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'xi-api-key': import.meta.env.VITE_ELEVENLABS_API_KEY\n            },\n            body: JSON.stringify({\n              text: responseText,\n              voice_settings: {\n                stability: 0.5,\n                similarity_boost: 0.5\n              }\n            })\n          });\n\n          if (!voiceResponse.ok) {\n            console.warn('Voice generation failed, continuing without audio');\n            return {\n              response: {\n                text: responseText,\n                status: character.storySettings.initialContext.mood,\n                location: character.storySettings.initialContext.location,\n                mood: character.emotionalSettings.baseEmotions[0],\n                action: character.storySettings.initialContext.currentSituation\n              }\n            };\n          }\n\n          const audioBlob = await voiceResponse.blob();\n          const audioUrl = URL.createObjectURL(audioBlob);\n\n          return {\n            response: {\n              text: responseText,\n              status: character.storySettings.initialContext.mood,\n              location: character.storySettings.initialContext.location,\n              mood: character.emotionalSettings.baseEmotions[0],\n              action: character.storySettings.initialContext.currentSituation\n            },\n            audioUrl\n          };\n        } catch (voiceError) {\n          console.error('Error generating voice:', voiceError);\n          // 返回没有语音的响应\n          return {\n            response: {\n              text: responseText,\n              status: character.storySettings.initialContext.mood,\n              location: character.storySettings.initialContext.location,\n              mood: character.emotionalSettings.baseEmotions[0],\n              action: character.storySettings.initialContext.currentSituation\n            }\n          };\n        }\n      } catch (error) {\n        console.error(`Attempt ${retryCount + 1} failed:`, error);\n        retryCount++;\n        \n        if (retryCount === maxRetries) {\n          console.error('All retry attempts failed');\n          return {\n            response: {\n              text: character.dialogueSettings.responseTemplates.thinking,\n              status: character.storySettings.initialContext.mood,\n              location: character.storySettings.initialContext.location,\n              mood: character.emotionalSettings.baseEmotions[0],\n              action: character.storySettings.initialContext.currentSituation\n            }\n          };\n        }\n        \n        // 等待一段时间后重试\n        await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));\n      }\n    }\n  };\n\n  const handleSendMessage = async (text) => {\n    // 添加用户消息\n    const userMessage = {\n      role: 'user',\n      text,\n      timestamp: new Date().toISOString()\n    };\n    \n    setMessages(prev => [...prev, userMessage]);\n    addChatMessage(characterId, userMessage);\n\n    try {\n      // 生成角色回复\n      const response = await generateResponse(character, text, {\n        previousMessages: messages\n      });\n\n      // 添加角色回复\n      const characterMessage = {\n        role: 'assistant',\n        ...response,\n        timestamp: new Date().toISOString()\n      };\n      \n      setMessages(prev => [...prev, characterMessage]);\n      addChatMessage(characterId, characterMessage);\n    } catch (error) {\n      console.error('Error generating response:', error);\n    }\n  };\n\n  const handleStartChat = async () => {\n    setShowIntro(false);\n    setIsTyping(true);\n\n    try {\n      // 调用API生成初始场景\n      const scenarioResult = await generateInitialScenario(character);\n      \n      if (scenarioResult) {\n        const scenarioMessage = {\n          text: scenarioResult.mainScenario,\n          type: 'scenario',\n          timestamp: new Date().toISOString(),\n          context: scenarioResult.initialContext,\n          topics: scenarioResult.possibleTopics\n        };\n        \n        // 添加角色的第一条消息\n        const characterMessage = {\n          text: character.dialogueSettings.responseTemplates.greeting,\n          type: 'character',\n          timestamp: new Date().toISOString(),\n          status: scenarioResult.initialContext.mood,\n          location: scenarioResult.initialContext.location,\n          mood: character.emotionalSettings.baseEmotions[0],\n          action: scenarioResult.initialContext.situation\n        };\n        \n        setMessages([scenarioMessage, characterMessage]);\n      } else {\n        // 如果API调用失败，使用预设场景作为后备\n        const fallbackScenarioMessage = {\n          text: character.storySettings.mainScenario,\n          type: 'scenario',\n          timestamp: new Date().toISOString(),\n          context: character.storySettings.initialContext,\n          topics: character.storySettings.plotPoints\n        };\n        \n        const fallbackCharacterMessage = {\n          text: character.dialogueSettings.responseTemplates.greeting,\n          type: 'character',\n          timestamp: new Date().toISOString(),\n          status: character.storySettings.initialContext.mood,\n          location: character.storySettings.initialContext.location,\n          mood: character.emotionalSettings.baseEmotions[0],\n          action: character.storySettings.initialContext.currentSituation\n        };\n        \n        setMessages([fallbackScenarioMessage, fallbackCharacterMessage]);\n      }\n    } catch (error) {\n      console.error('Error starting chat:', error);\n      // 使用默认问候语作为最后的后备方案\n      const greetingMessage = {\n        text: character.dialogueSettings.responseTemplates.greeting,\n        type: 'character',\n        timestamp: new Date().toISOString()\n      };\n      \n      setMessages([greetingMessage]);\n    } finally {\n      setIsTyping(false);\n    }\n  };\n\n  const handlePlayAudio = async (audioUrl) => {\n    if (audioRef.current && audioUrl) {\n      setIsPlayingAudio(true);\n      audioRef.current.src = audioUrl;\n      await audioRef.current.play();\n      setIsPlayingAudio(false);\n    }\n  };\n\n  const handleBack = () => {\n    navigate('/');\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage(inputValue);\n    }\n  };\n\n  if (!character) return null;\n  if (showIntro) {\n    return (\n      <Fade in={true}>\n        <div>\n          <CharacterIntro \n            character={character} \n            onStartChat={handleStartChat}\n            onBack={handleBack}\n          />\n        </div>\n      </Fade>\n    );\n  }\n\n  return (\n    <Box sx={{ \n      height: '100vh', \n      display: 'flex', \n      flexDirection: 'column',\n      bgcolor: '#1A1B1E'\n    }}>\n      {/* 顶部导航栏 */}\n      <AppBar \n        position=\"static\" \n        elevation={0}\n        sx={{ \n          bgcolor: 'rgba(26, 27, 30, 0.8)',\n          borderBottom: '1px solid rgba(255, 255, 255, 0.1)'\n        }}\n      >\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" onClick={() => setShowIntro(true)}>\n            <ArrowBackIcon />\n          </IconButton>\n          <Avatar \n            src={character.avatar}\n            sx={{ width: 40, height: 40, mx: 2 }}\n          />\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1, color: 'white' }}>\n            {character.name}\n          </Typography>\n        </Toolbar>\n      </AppBar>\n\n      {/* 消息列表 */}\n      <Container \n        maxWidth=\"md\" \n        sx={{ \n          flex: 1, \n          overflow: 'auto', \n          py: 2,\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2\n        }}\n      >\n        {messages.map((message, index) => (\n          <Fade in={true} key={index}>\n            <Box\n              sx={{\n                display: 'flex',\n                justifyContent: message.role === 'user' ? 'flex-end' : 'flex-start',\n                gap: 2,\n                width: '100%'\n              }}\n            >\n              {message.role === 'assistant' && (\n                <Avatar\n                  src={character.avatar}\n                  sx={{ width: 40, height: 40 }}\n                />\n              )}\n              <Box sx={{ maxWidth: message.type === 'scenario' ? '100%' : '70%' }}>\n                {message.type === 'scenario' && (\n                  <Paper\n                    elevation={0}\n                    sx={{\n                      p: 3,\n                      bgcolor: 'rgba(0, 0, 0, 0.3)',\n                      color: 'white',\n                      borderRadius: 2,\n                      mb: 2\n                    }}\n                  >\n                    <Typography \n                      variant=\"subtitle1\" \n                      sx={{ \n                        color: '#7C3AED',\n                        mb: 1,\n                        fontWeight: 500\n                      }}\n                    >\n                      Initial Scenario:\n                    </Typography>\n                    <Typography variant=\"body1\">\n                      {message.text}\n                    </Typography>\n                    {message.context && (\n                      <Box \n                        sx={{ \n                          mt: 2,\n                          p: 1,\n                          bgcolor: 'rgba(0, 0, 0, 0.3)',\n                          borderRadius: 1,\n                          fontSize: '0.875rem',\n                          color: 'rgba(255, 255, 255, 0.7)'\n                        }}\n                      >\n                        {message.context.location && <div>Location: {message.context.location}</div>}\n                        {message.context.mood && <div>Mood: {message.context.mood}</div>}\n                        {message.context.situation && <div>Situation: {message.context.situation}</div>}\n                      </Box>\n                    )}\n                    {message.topics && message.topics.length > 0 && (\n                      <Box sx={{ mt: 2 }}>\n                        <Typography \n                          variant=\"subtitle2\" \n                          sx={{ \n                            color: '#7C3AED',\n                            mb: 1\n                          }}\n                        >\n                          Suggested Topics:\n                        </Typography>\n                        <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\n                          {message.topics.map((topic, i) => (\n                            <Chip\n                              key={i}\n                              label={topic}\n                              size=\"small\"\n                              sx={{\n                                bgcolor: 'rgba(124, 58, 237, 0.2)',\n                                color: 'white',\n                                '&:hover': {\n                                  bgcolor: 'rgba(124, 58, 237, 0.3)'\n                                }\n                              }}\n                            />\n                          ))}\n                        </Box>\n                      </Box>\n                    )}\n                  </Paper>\n                )}\n                {message.role !== 'user' && (\n                  <Paper\n                    elevation={1}\n                    sx={{\n                      p: 2,\n                      bgcolor: message.role === 'user' \n                        ? '#7C3AED' \n                        : 'rgba(255, 255, 255, 0.05)',\n                      color: 'white',\n                      borderRadius: message.role === 'user' \n                        ? '20px 20px 0 20px' \n                        : '20px 20px 20px 0'\n                    }}\n                  >\n                    <Typography variant=\"body1\">\n                      {message.text}\n                    </Typography>\n                  </Paper>\n                )}\n              </Box>\n              {message.role === 'user' && (\n                <Avatar sx={{ bgcolor: '#7C3AED', width: 40, height: 40 }}>\n                  You\n                </Avatar>\n              )}\n            </Box>\n          </Fade>\n        ))}\n        {isTyping && (\n          <Box sx={{ display: 'flex', gap: 2, alignItems: 'center' }}>\n            <Avatar\n              src={character.avatar}\n              sx={{ width: 40, height: 40 }}\n            />\n            <Paper\n              elevation={1}\n              sx={{\n                p: 2,\n                maxWidth: '70%',\n                bgcolor: 'rgba(255, 255, 255, 0.05)',\n                color: 'white',\n                borderRadius: '20px 20px 20px 0'\n              }}\n            >\n              <Typography variant=\"body1\">\n                Typing...\n              </Typography>\n            </Paper>\n          </Box>\n        )}\n        <div ref={messagesEndRef} />\n      </Container>\n\n      {/* 输入区域 */}\n      <Paper \n        elevation={0}\n        sx={{\n          p: 2,\n          bgcolor: 'rgba(26, 27, 30, 0.8)',\n          borderTop: '1px solid rgba(255, 255, 255, 0.1)'\n        }}\n      >\n        <Container maxWidth=\"md\">\n          <Box sx={{ display: 'flex', gap: 2 }}>\n            <TextField\n              fullWidth\n              multiline\n              maxRows={4}\n              value={inputValue}\n              onChange={(e) => setInputValue(e.target.value)}\n              onKeyPress={handleKeyPress}\n              placeholder=\"Type your message...\"\n              variant=\"outlined\"\n              size=\"small\"\n              inputRef={inputRef}\n              sx={{\n                '& .MuiOutlinedInput-root': {\n                  bgcolor: 'rgba(255, 255, 255, 0.05)',\n                  borderRadius: 3,\n                  color: 'white',\n                  '& fieldset': {\n                    borderColor: 'rgba(255, 255, 255, 0.1)'\n                  },\n                  '&:hover fieldset': {\n                    borderColor: 'rgba(255, 255, 255, 0.2)'\n                  },\n                  '&.Mui-focused fieldset': {\n                    borderColor: '#7C3AED'\n                  }\n                },\n                '& .MuiOutlinedInput-input::placeholder': {\n                  color: 'rgba(255, 255, 255, 0.5)'\n                }\n              }}\n            />\n            <IconButton \n              onClick={() => handleSendMessage(inputValue)}\n              disabled={!inputValue.trim() || isTyping}\n              sx={{\n                bgcolor: '#7C3AED',\n                color: 'white',\n                '&:hover': {\n                  bgcolor: '#6D28D9'\n                },\n                '&.Mui-disabled': {\n                  bgcolor: 'rgba(124, 58, 237, 0.2)',\n                  color: 'rgba(255, 255, 255, 0.3)'\n                }\n              }}\n            >\n              <SendIcon />\n            </IconButton>\n          </Box>\n        </Container>\n      </Paper>\n\n      {/* 隐藏的音频播放器 */}\n      <audio ref={audioRef} style={{ display: 'none' }} />\n    </Box>\n  );\n};\n\nexport default Chat; "],"names":["getAppBarUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","useUtilityClasses","ownerState","color","position","classes","slots","capitalize","composeClasses","joinVars","var1","var2","AppBarRoot","styled","Paper","props","styles","theme","backgroundColorDefault","_extends","AppBar","React.forwardRef","inProps","ref","useDefaultProps","className","enableColorOnDark","other","_objectWithoutPropertiesLoose","_jsx","clsx","getToolbarUtilityClass","disableGutters","variant","ToolbarRoot","Toolbar","component","FavoriteIcon","createSvgIcon","FavoriteBorderIcon","MessageIcon","SendIcon","StarIcon","StarBorderIcon","CharacterIntro","character","onStartChat","onBack","characterStats","toggleLike","toggleFavorite","useUserStore","stats","user","state","handleLike","event","response","data","error","handleCollect","jsxs","Box","jsx","Button","ArrowBackIcon","Typography","IconButton","_a","tag","index","Chip","Chat","navigate","useNavigate","characterId","useParams","messages","setMessages","useState","inputValue","setInputValue","showIntro","setShowIntro","isTyping","setIsTyping","initialScenario","setInitialScenario","isPlayingAudio","setIsPlayingAudio","messagesEndRef","useRef","inputRef","audioRef","addChatMessage","getChatHistory","CHARACTERS","scrollToBottom","useEffect","history","generateInitialScenario","result","generateScenarioAPI","generateResponse","userInput","previousMessages","retryCount","openaiResponse","message","openaiData","responseText","voiceResponse","audioBlob","audioUrl","voiceError","resolve","handleSendMessage","text","userMessage","prev","characterMessage","handleStartChat","scenarioResult","scenarioMessage","fallbackScenarioMessage","fallbackCharacterMessage","greetingMessage","handleBack","handleKeyPress","Fade","Avatar","Container","topic","i","TextField"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}